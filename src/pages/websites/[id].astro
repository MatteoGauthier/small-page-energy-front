---
import { Breadcrumbs } from "astro-breadcrumbs"
import Footer from "../../components/Footer.astro"
import CalculateSection from "../../components/sections/CalculateSection.astro"
import SocialSection from "../../components/sections/SocialSection.astro"
import Layout from "../../layouts/Layout.astro"
import { getWebsitesWithRanks } from "../../lib/api"
import { type GetWebsitesWithRanks } from "../../types/api/getWebsitesWithRanks"
import Button from "../../components/Button.astro"

export async function getStaticPaths() {
  const websites = await getWebsitesWithRanks()
  return websites.map((c) => ({
    params: { id: c.website.id },
    props: c,
  }))
}
type Props = GetWebsitesWithRanks[number]

const props = Astro.props

const customCrumbs = [
  {
    text: "Accueil",
    href: "/",
  },
  {
    text: "Classement générale",
    href: "/ranking",
  },
  {
    text: `${props.website.name}`,
    href: `/websites/${props.website.id}`,
  },
]
---

<Layout title={`${props.website.name} Résultats - Small Page Energy`}>
  <Breadcrumbs crumbs={customCrumbs} />

  <section class="max-w-screen-xl mx-auto grid grid-cols-6">
    <div>
      <h1>{props.website.name}</h1>
      <Button href="" variant="primary" title="Communiqué de presse" custom="w-fit" icon="download" />
    </div>
    <div class="bg-white"></div>

    <pre>
      {JSON.stringify(props, null, 2)}
    </pre>
  </section>

  <CalculateSection />
  <SocialSection />
</Layout>

<Footer />

<style>
  body {
    background: radial-gradient(circle at right bottom, hsla(268, 83%, 63%, 0.4) 0%, rgba(108, 55, 170, 0) 50%),
      radial-gradient(circle at 0 -2%, rgba(155, 82, 239, 0.4) 0%, rgba(108, 55, 170, 0) 10%),
      radial-gradient(circle at right center, rgba(155, 82, 239, 0.4) 0%, rgba(108, 55, 170, 0) 30%),
      radial-gradient(circle at left center, rgba(155, 82, 239, 0.4) 0%, rgba(108, 55, 170, 0) 30%),
      radial-gradient(circle at center, rgba(145, 224, 255, 0.5) 0%, rgba(145, 224, 255, 0) 85%);

    @media (min-width: 768px) {
      background: radial-gradient(circle at 120% 70%, hsla(268, 83%, 63%, 0.4) 0%, rgba(108, 55, 170, 0) 30%),
        radial-gradient(circle at -30% -5%, rgba(155, 82, 239, 0.4) 20%, rgba(108, 55, 170, 0) 30%),
        radial-gradient(circle at 0 130%, rgba(155, 82, 239, 0.4) 20%, rgba(108, 55, 170, 0) 30%),
        radial-gradient(circle at right center, rgba(155, 82, 239, 0.4) 0%, rgba(108, 55, 170, 0) 30%),
        radial-gradient(circle at center, rgba(145, 224, 255, 0.5) 0%, rgba(145, 224, 255, 0) 85%);
    }
  }
</style>
